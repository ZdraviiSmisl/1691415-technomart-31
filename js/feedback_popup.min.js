const feedbackLink=document.body.querySelector(".company-info__btn"),popupForm=document.body.querySelector(".modal-feedback"),popupClouse=document.body.querySelector(".form-feedback__modal-close"),nameInput=popupForm.querySelector(".form-feedback__name-input"),emailInput=popupForm.querySelector(".form-feedback__email-input"),formFeedback=popupForm.querySelector(".form-feedback"),areaFeedback=popupForm.querySelector(".form-feedback__text");let isStorageSupport=!0,storage="",mail="";try{storage=localStorage.getItem("nameUser"),mail=localStorage.getItem("emailUser")}catch(e){isStorageSupport=!1}feedbackLink.addEventListener("click",function(e){e.preventDefault(),popupForm.classList.add("modal-show"),storage?(nameInput.value=storage,nameInput.focus()):mail&&(emailInput.value=mail)}),popupClouse.addEventListener("click",function(e){e.preventDefault(),popupForm.classList.remove("modal-show"),popupForm.classList.remove("modal-error")}),formFeedback.addEventListener("submit",function(e){emailInput.value&&nameInput.value&&areaFeedback.value?isStorageSupport&&(localStorage.setItem("nameUser",nameInput.value),localStorage.setItem("emailUser",emailInput.value)):(e.preventDefault(),popupForm.classList.remove("modal-error"),popupForm.offsetWidth=popupForm.offsetWidth,popupForm.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupForm.classList.contains("modal-show")&&(e.preventDefault(),popupForm.classList.remove("modal-show"),popupForm.classList.remove("modal-error"))});
